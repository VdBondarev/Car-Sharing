# Hi there!!! Online car sharing application is welcoming you!

![1GIF](car_sharing.jpeg)

# Online Car Sharing project API README

## Introduction

Welcome to online car sharing made using Spring Boot. This one is created to provide you with a cool and memorable experience interacting with this service.

## Inspiration

We live in a world where you always need transportation. And a car is one of the best ways to get it. So author's inspiration is to provide people with an easy-to-interact service for renting a car just in a moment.

## Technologies used

- **Stripe API:** An API that lets you create payments and pay for them easily.
- **Telegram API:** Using this, author created a telegram bot for sending notification about such events in the application as: creation of a new car, returning a car, successful payments etc.
- **Spring Boot (v3.2.2):** A super-powerful framework for creating Java-based applications (just like this one).
- **Spring Security:** Ensures application security with features such as authentication and authorization.
- **JWT (JSON Web Token):** Ensures secure user authentication.
- **Spring Data JPA:** Simplifies the data access layer and interactions with the database.
- **Swagger (springdoc-openapi):** Eases understanding and interaction with endpoints for other developers.
- **MapStruct (v1.5.5.Final):** Simplifies the implementation of mappings between Java bean types.
- **Liquibase:** A powerful way to ensure database-independence for project and database schema changes and control.
- **Docker:** A powerful tool for letting other developers use this application

## Project structure

This Spring Boot application follows the most common structure with such **main layers** as:
- repository (for working with database).
- service (for business logic implementing).
- controller (for accepting client's requests and getting responses to them).

Also it has other **important layers** such as:
- mapper (for converting models for different purposes).
- security (for letting user authorize and be secured while interacting with application).
- exception (application's custom exceptions for better understanding the problems you may face).
- dto (for managing sensitive info about models and better representation of it).
- config (main security config and also config for mappers).
- telegram (implementation of sending messages to a telegram chat by bot).
- util (where the interaction with Stripe API is implemented).

## Key features

- **User authentication:** Secure user authentication using JWT for enhanced security.
- **User authorization:** Limited access to some endpoints of the application.
- **User login:** Login by login and password for generating JWT token.
- **API Documentation:** Using Swagger to generate clear and interactive API documentation.

## Setup Instructions

To set up and run the project locally, follow these steps:

1. Clone the repository.
2. Ensure you have Java 21 installed.
3. Ensure you have Maven installed.
4. Ensure you have Docker installed.
5. Create the database configuration in the `.env` file. [take a look at an example in this file](.envSample)
6. Build the project using Maven: `mvn clean package` (it will create required jar-archive).
7. Build the image using Docker: `docker-compose build`.
8. Run the application using Docker: `docker-compose up` (to test, send requests to port pointed in your .env file as SPRING_LOCAL_PORT).

## Roles explanation

- There are only 2 roles of users available: **user role and manager role**.
- User has access to such endpoints as searching cars, getting a car by id, renting a car etc.
- But user doesn't get to delete car from database or update them. **(Remember it)**
- All cars endpoint are public available, but some of them require a user to be a manager. **(Remember it)**
- All endpoints for users are placed before the endpoints for manager in controllers. **(Go check that)**

## Users managing

- There is 1 user added to a database with help of liquibase.
- This user is already a manager.
- Credential: email: admin@example.com, password: 1234567890.
- Using this manager credentials you can update other roles of other users to admins or users.

## For endpoints understanding

- First of all: see descriptions (@Operation annotation) on each endpoint;
- Second of all: [watch a video with author's explanation of the endpoints](https://www.loom.com/share/82d71e6b11744338adada836d852198e?sid=4625c335-2ec2-4d1e-9610-27df58693e5f).
- **Remember**: use JWT token generated by login endpoint for every request  (except for login and register).
- When signing-up, use nothing but required params.
- When authenticating (login endpoint), pass as params your email and password (you should already be signed-up).
- Also remember what you can do and what you are not allowed to do as a simple user (not a manager).
